(function(a,b,c){b.extend(c,{myInit:function(){b("#feedSub").click(this.formSubmit);b("#question").blur(this.qBlur);b("#phone").blur(this.telBlur);b("#accountId").blur(this.emailBlur);b("#question").focus(function(){c.hideErr(this)});b("#phone").focus(function(){c.hideErr(this)});b("#accountId").focus(function(){c.hideErr(this)})},formSubmit:function(){var d=c,i=true,f=b("#productId"),e=b("#productId").val().trim(),m=b("#flag"),h=b("#flag").val().trim(),g=b("#question"),k=b("#question").val().trim(),j=b("#phone"),o=b("#phone").val().trim(),l=b("#accountId"),n=b("#accountId").val().trim();i&=d.qBlur.call(b("#question")[0]);i&=d.telBlur.call(b("#phone")[0]);i&=d.emailBlur.call(b("#accountId")[0]);if(!!i){c.post("http://feedback.zxkf.163.com/movie/insert.html",{question:k,accountId:n,phone:o,productId:e,flag:h},function(q,p){if(!q&&p){p=c.parseJSON(p);if(p.retcode=="200"){g.val("");j.val("");l.val("");c.showDialog("提交成功",'<div class="pop_box"><b class="right"></b><div class="cont"><p>感谢您的肯定！</p><p>我们会尽快与您联络！</p></div></div>')}else{if(p.retcode=="400"){c.showDialog("提交失败",'<div class="pop_box"><b class="err"></b><div class="cont"><p>对不起！</p><p>网络出错，请重新提交！</p></div></div>')}else{if(p.retcode=="460"){c.showDialog("提交失败",'<div class="pop_box"><b class="err"></b><div class="cont"><p>对不起！</p><p>您输入数据有误，请重新输入！</p></div></div>')}}}}})}},showErr:function(e,d){b(e).parent().addClass("err");b(e).siblings(".errMsg").text(d)},hideErr:function(d){b(d).parent().removeClass("err")},qBlur:function(){var e=this.value.trim(),d=c;if(!e){d.showErr(this,"请输入您的问题或建议");return false}else{d.hideErr(this)}return true},telBlur:function(){var e=this.value.trim(),d=c;if(e){if(!d.isValidTel(e)||!e){d.showErr(this,"您输入的手机号格式有误，请重新输入!");return false}else{d.hideErr(this)}}else{d.hideErr(this)}return true},isValidTel:function(d){return/^0?(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/.test(d.trim())},emailBlur:function(){var e=this.value.trim(),d=c;if(e){if(!d.isValidEmail(e)){d.showErr(this,"您输入的邮箱格式有误，请重新输入!");return false}else{d.hideErr(this)}}else{d.showErr(this,"邮箱不可为空，请输入!");return false}return true},isValidEmail:function(d){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(d.trim())},showDialog:function(f,d){var e={title:f,content:d,width:469,button:["*确定"]};b.dialog(e)}})})(window,jQuery,Core);